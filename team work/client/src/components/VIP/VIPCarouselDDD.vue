<template>
  <div class="htmleaf-container">
    <div class="back">
      <a @click="goback">返回</a>
    </div>
    <div class="carousel" data-gap="20" data-bfc>
      <figure>
        <div>
          <h2>捞币换礼</h2>
          <div>
            <ul>
              <li>
                <h5>特权介绍</h5>
                <p>会员可在捞币商城中兑换产品</p>
              </li>
              <hr>
              <li>
                <h5>适用人群</h5>
                <p>所有会员</p>
              </li>
              <hr>
              <li>
                <h5>使用方法</h5>
                <p>进入捞币商城，消耗捞币，兑换相关商品</p>
              </li>
              <hr>
              <li>
                <h5>其他</h5>
                <p>在不违反法律规定的前提下，海底捞有权对活动或权益未尽事宜进行补充说明和解释</p>
              </li>
            </ul>
          </div>
        </div>
        <div>
          <h2>生日赠礼</h2>
          <div>
            <ul>
              <li>
                <h5>特权介绍</h5>
                <p>生日当月1号给已完善生日信息的会员，发放生日当月可使用的30元代金券一张（请在APP端完善生日信息，生日当月完善信息的会员，将在明年生日越月1日发放）</p>
              </li>
              <hr>
              <li>
                <h5>适用人群</h5>
                <p>所有会员</p>
              </li>
              <hr>
              <li>
                <h5>使用方法</h5>
                <p>仅限会员本人在内地门店就餐使用。代金券不能与折扣券同时使用，且每次就餐只能使用一次代金券</p>
              </li>
              <hr>
              <li>
                <h5>其他</h5>
                <p>在不违反法律规定的前提下，海底捞有权对活动或权益未尽事宜进行补充说明和解释</p>
              </li>
            </ul>
          </div>
        </div>
        <div>
          <h2>升级礼遇</h2>
          <img src="http://127.0.0.1:5050/icon/lock_vip_2.png">
          <div>
            <ul>
              <li>
                <h5>特权介绍</h5>
                <p>每月1日升级至银海、金海、黑海的会员，将获得相应的礼遇。（不含原来就是该等级或降至该等级的会员）</p>
              </li>
              <hr>
              <li>
                <h5>适用人群</h5>
                <p>银海以上的会员，每月1日评定升级的会员</p>
              </li>
              <hr>
              <li>
                <h5>使用方法</h5>
                <p>仅限会员本人在内地门店就餐使用</p>
              </li>
              <hr>
              <li>
                <h5>其他</h5>
                <p>升级礼遇内容以后台发放为准，升级至相应等级只获得该等级礼遇。</p>
              </li>
            </ul>
          </div>
        </div>
        <div>
          <h2>线下活动</h2>
          <img src="http://127.0.0.1:5050/icon/lock_vip_3.png">
          <div>
            <ul>
              <li>
                <h5>特权介绍</h5>
                <p>金海及以上等级会员有机会参与海底捞举办的相关线下活动</p>
              </li>
              <hr>
              <li>
                <h5>适用人群</h5>
                <p>金海及以上会员</p>
              </li>
              <hr>
              <li>
                <h5>使用方法</h5>
                <p>通过APP报名相应的线下活动，报名成功且通过审核的会员，即有机会参加</p>
              </li>
              <hr>
              <li>
                <h5>其他</h5>
                <p>在不违反法律规定的前提下，海底捞有权对活动或权益未尽事宜进行补充说明和解释</p>
              </li>
            </ul>
          </div>
        </div>
        <div>
          <h2>VIP专享</h2>
          <img src="http://127.0.0.1:5050/icon/lock_vip_4.png">
          <div>
            <ul>
              <li>
                <h5>特权介绍</h5>
                <p>黑海会员拥有海底捞APP专属客服线上咨询，至少提前2小时与黑海专属客服联系，享受优先安排，减少等位时间。（法定节假日及特殊情况除外）</p>
              </li>
              <hr>
              <li>
                <h5>适用人群</h5>
                <p>黑海会员本人专享</p>
              </li>
              <hr>
              <li>
                <h5>使用方法</h5>
                <p>成为黑海会员，在APP进入“会员-专属客服”即可联系专属客服</p>
              </li>
              <hr>
              <li>
                <h5>其他</h5>
                <p>在不违反法律规定的前提下，海底捞有权对活动或权益未尽事宜进行补充说明和解释</p>
              </li>
            </ul>
          </div>
        </div>
        <div>
          <h2>包间会议</h2>
          <img src="http://127.0.0.1:5050/icon/lock_vip_4.png">
          <div>
            <ul>
              <li>
                <h5>特权介绍</h5>
                <p>黑海会员每月享受1张包间限免服务费使用券，发放当月有效，可用于会议洽谈等活动</p>
              </li>
              <hr>
              <li>
                <h5>适用人群</h5>
                <p>黑海会员本人专享</p>
              </li>
              <hr>
              <li>
                <h5>使用方法</h5>
                <p>目前仅在部分门店开发，预约方法：提前1-2天，APP进入“会员-专属客服”，联系黑海专属客服预约。</p>
              </li>
              <hr>
              <li>
                <h5>其他</h5>
                <p>在不违反法律规定的前提下，海底捞有权对活动或权益未尽事宜进行补充说明和解释</p>
              </li>
            </ul>
          </div>
        </div>
      </figure>
      <nav>
        <img src="http://127.0.0.1:5050/icon/cal_month_left_disable.webp" class="nav prev">
        <div></div>
        <img src="http://127.0.0.1:5050/icon/cal_month_right_disable.webp" class="nav next">
      </nav>
    </div>
  </div>
</template>

<style scoped>
body {
  margin: 0;
  background-color: #eeeeee;
}

.back {
  text-align: left;
  position: fixed;
  top: 0.3rem;
  left: 0.3rem;
  font-size: 0.3rem;
  background-color: #fff;
}

.htmleaf-container {
  margin-top: 0.8rem;
  text-align: left;
}

.carousel h2 {
  margin: 0.2rem 0 0rem 0.2rem;
  color: white;
  font-size: 0.4rem;
}
.carousel h5 {
  margin: 0;
  font-size: 0.3rem;
  margin-bottom: 0.1rem;
}

.carousel p {
  margin: 0;
  font-size: 0.2rem;
}
.carousel hr {
  margin-top: 0.2rem;
  margin-bottom: 0.2rem;
}

.carousel {
  padding: 0.5rem 0 0.5rem 0;
  background-color: #eee;
  width: 200%;
  position: fixed;
  right: -50%;
  -webkit-perspective: 500px;
  perspective: 500px;
  overflow: hidden;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-align: center;
  -ms-flex-align: center;
  align-items: center;
}

.carousel > * {
  -webkit-box-flex: 0;
  -ms-flex: 0 0 auto;
  flex: 0 0 auto;
}

.carousel figure {
  margin: 0;
  width: 40%;
  -webkit-transform-style: preserve-3d;
  transform-style: preserve-3d;
  -webkit-transition: -webkit-transform 0.5s;
  transition: -webkit-transform 0.5s;
  transition: transform 0.5s;
  transition: transform 0.5s, -webkit-transform 0.5s;
}

.carousel figure > div {
  width: 100%;
  box-sizing: border-box;
  padding: 0 0px;
}

.carousel figure > div:nth-child(1),
.carousel figure > div:nth-child(2),
.carousel figure > div:nth-child(3),
.carousel figure > div:nth-child(4),
.carousel figure > div:nth-child(5),
.carousel figure > div:nth-child(6) {
  position: relative;
  height: 9rem;
  overflow: hidden;
  background-size: cover;
  background-repeat: no-repeat;
}

.carousel figure > div:nth-child(1) {
  background-image: url("http://127.0.0.1:5050/vip/equity_0.png");
}
.carousel figure > div:nth-child(2) {
  background-image: url("http://127.0.0.1:5050/vip/equity_1.png");
}
.carousel figure > div:nth-child(3) {
  background-image: url("http://127.0.0.1:5050/vip/equity_2.png");
}
.carousel figure > div:nth-child(4) {
  background-image: url("http://127.0.0.1:5050/vip/equity_3.png");
}
.carousel figure > div:nth-child(5) {
  background-image: url("http://127.0.0.1:5050/vip/equity_4.png");
}
.carousel figure > div:nth-child(6) {
  background-image: url("http://127.0.0.1:5050/vip/equity_5.png");
}

.carousel figure div:not(:first-of-type) {
  position: absolute;
  left: 0;
  top: 0;
}

.carousel figure > div > img {
  width: 20%;
  margin-left: 0.2rem;
  position: relative;
  bottom: 0.4rem;
}

.carousel figure > div > div {
  height: 67%;
  width: 86%;
  position: absolute;
  bottom: 1rem;
}
.carousel figure > div > div > ul {
  padding: 0;
}
.carousel figure > div > div > ul > li {
  margin-left: 0.5rem;
}
.carousel figure > div > div > ul > li:nth-child(1) {
  list-style-image: url("http://127.0.0.1:5050/vip/star.png");
}
.carousel figure > div > div > ul > hr:nth-child(2) {
  position: relative;
}
.carousel figure > div > div > ul > li:nth-child(3) {
  list-style-image: url("http://127.0.0.1:5050/vip/people.png");
  position: relative;
  bottom: 0.5rem;
}
.carousel figure > div > div > ul > hr:nth-child(4) {
  position: relative;
  bottom: 0.5rem;
}
.carousel figure > div > div > ul > li:nth-child(5) {
  list-style-image: url("http://127.0.0.1:5050/vip/question.png");
  position: relative;
  bottom: 1rem;
}
.carousel figure > div > div > ul > hr:nth-child(6) {
  position: relative;
  bottom: 1rem;
}
.carousel figure > div > div > ul > li:nth-child(7) {
  list-style-image: url("http://127.0.0.1:5050/vip/others.png");
  position: relative;
  bottom: 1.5rem;
}

.carousel nav {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
  -ms-flex-pack: center;
  justify-content: center;
  margin: 20px 0 0;
}
.carousel nav div {
  width: 1rem;
}
.carousel nav img {
  height: 0.6rem;
  width: 0.6rem;
}
</style>

<script>
// "use strict";
export default {
  data() {
    return {};
  },
  methods: {
    goback: function() {
      this.$router.go(-1);
    }
  },
  mounted() {
    var carousels = document.querySelector(".carousel");
    carousel(carousels, this.$route.query.id);

    function carousel(root, i) {
      var figure = root.querySelector("figure"),
        nav = root.querySelector("nav"),
        images = figure.children,
        n = images.length,
        gap = root.dataset.gap || 0,
        bfc = "bfc" in root.dataset,
        theta = (2 * Math.PI) / n,
        currImage = i;
      
    //   console.log(images);
    //   console.log("123");
    //   for(var a=0;a<currImage;a++){
    //       images.push(images.shift());
    //   }
    //   currImage=0;


      setupCarousel(n, parseFloat(getComputedStyle(images[0]).width));
      window.addEventListener("resize", function() {
        setupCarousel(n, parseFloat(getComputedStyle(images[0]).width));
      });

      setupNavigation();

      function setupCarousel(n, s) {
        var apothem = s / (2 * Math.tan(Math.PI / n));

        figure.style.transformOrigin = "50% 50% " + -apothem + "px";

        for (var i = 0; i < n; i++) {
          images[i].style.padding = gap + "px";
        }
        for (i = 1; i < n; i++) {
          images[i].style.transformOrigin = "50% 50% " + -apothem + "px";
          images[i].style.transform = "rotateY(" + i * theta + "rad)";
        }
        if (bfc)
          for (i = 0; i < n; i++) {
            images[i].style.backfaceVisibility = "hidden";
          }
        rotateCarousel(currImage);
      }

      function setupNavigation() {
        nav.addEventListener("click", onClick, true);

        function onClick(e) {
          e.stopPropagation();

          var t = e.target;
          if (t.tagName.toUpperCase() != "IMG") return;
          if (t.classList.contains("next")) {
            currImage++;
          } else {
            currImage--;
          }

          rotateCarousel(currImage);
        }
      }

      function rotateCarousel(imageIndex) {
        figure.style.transform = "rotateY(" + imageIndex * -theta + "rad)";
      }
    }
  }
};
</script>